<!DOCTYPE html>
<html lang="en" style="width: 100%; height: 100%">
    <head>
        <title>VKGeo</title>

        <meta charset="UTF-8">

        <link rel="stylesheet" href="https://openlayers.org/en/v4.6.5/css/ol.css" type="text/css">

        <script src="https://openlayers.org/en/v4.6.5/build/ol.js"></script>
        <script src="https://www.localeplanet.com/api/auto/icu.js"></script>
        <script src="https://www.localeplanet.com/api/translate.js"></script>
        <script src="https://vk.com/js/api/xd_connection.js?2"></script>
    </head>
    <body style="width: 100%; height: 100%">
        <div id="map" style="width: 100%; height: 100%"></div>
        <div id="controlPanel" style="margin: auto; position: absolute; width: 80px; top: 10%; right: 0; bottom: 10%; z-index: 1; display: none"></div>
        <div id="fatalErrorMessage" style="margin: auto; position: absolute; left: 25%; top: 35%; right: 25%; bottom: 35%; z-index: 2; display: none"></div>

        <script>
            function displayFatalError(error_text) {
                var fem_div = document.getElementById("fatalErrorMessage");

                fem_div.style.display = "block";

                console.log(error_text);
            }

            try {
                eval("const c = 1; let v = (x) => x + c;");

                document.addEventListener("DOMContentLoaded", function() {
                    var script = document.createElement("script");

                    script.src   = "vkgeo.js";
                    script.async = true;

                    document.getElementsByTagName("head")[0].appendChild(script);
                });
            } catch (err) {
                displayFatalError(_("Please update your browser to start using this app."));
            }
        </script>
    </body>
</html>
